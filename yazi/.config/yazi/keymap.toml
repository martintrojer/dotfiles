[[mgr.prepend_keymap]]
on   = [ "c", "i" ]
run  = '''
	shell '
		mime=$(file -bL --mime-type "$0")
		if [[ "$OSTYPE" == "darwin"* ]]; then
			# macOS: Use AppleScript for complex types (images/PDFs) and pbcopy for text
			if [[ "$mime" == image/* || "$mime" == "application/pdf" ]]; then
				osascript -e "set the clipboard to (read (POSIX file \"$0\") as «class furl»)"
			else
				pbcopy < "$0"
			fi
		elif [[ "$XDG_SESSION_TYPE" == "wayland" ]]; then
			# Wayland: wl-copy automatically handles mime-types from file stream
			wl-copy -t "$mime" < "$0"
		else
			# X11: xclip requires explicit mime-type targeting
			xclip -selection clipboard -t "$mime" -i "$0"
		fi
	'
'''
desc = "Copy content to clipboard"

[[mgr.prepend_keymap]]
on   = [ "g", "s" ]
run  = "cd sftp://bubba/"
desc = "Go to bubba"

[[mgr.prepend_keymap]]
on   = [ "g", "t" ]
run  = '''
	shell '
		if [[ "$OSTYPE" == "darwin"* ]]; then
			ya emit cd "$HOME/.Trash"
		else
			ya emit cd "$HOME/.local/share/Trash"
		fi
	'
'''
desc = "Go to Trash"

[[mgr.prepend_keymap]]
on   = [ "g", "l" ]
run  = "shell 'glow \"$0\" -p' --block"
desc = "Preview with glow"
